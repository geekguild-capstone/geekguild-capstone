 <!DOCTYPE html>
        <html xmlns:th="http://www.thymeleaf.org" lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Edit</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <link th:include="partials/header">


            <style>
                body {
                    background-color: #333333;
                    color: #8e09e7;
                    font-family: Arial, sans-serif;
                }

                h2 {
                    color: #8fd93f;
                    text-align: center;
                }

                h3 {
                    color: #8e09e7;
                    text-align: center;
                }

                .container {
                    background-color: transparent;
                    padding: 20px;
                    border-radius: 10px;
                    margin: 20px auto;
                    max-width: 600px;
                    box-shadow: -2px -2px 6px rgba(142, 9, 231, 0.5);
                    overflow: auto;
                }



                label {
                    color: #ee8631;
                }

                input[type="text"],
                input[type="email"],
                textarea,
                input[type="url"] {
                    width: 100%;
                    padding: 8px;
                    margin: 5px 0;
                    border: 1px solid #ee8631;
                    border-radius: 5px;
                    background-color: #fff;
                    color: #000;
                }

                button {
                    background-color: #ee8631;
                    color: #fff;
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    display: block;
                    margin: 0 auto;
                }


                /* Add styles for the profile picture */
                .logo {
                    position: relative;
                    width: 150px;
                    height: 150px;
                    border-radius: 50%;
                    border: 5px solid #8fd93f;
                    bottom: 5px;
                    left: 10px;
                    overflow: hidden;
                }

                /* Style for the "Upload Image" icon */
                .upload-icon {
                    background-color: #8fd93f;
                    color: #fff;
                    padding: 5px 10px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-bottom: 10px; /* Add margin to create space between .upload-icon and .logo */
                    left: 50%;
                    transform: translateX(-50%);
                    position: relative;
                }

                .orange-button {
                    background-color: #ee8631;
                    color: #fff;
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    display: block;
                    margin: 0 auto;
                }

                /* Add styles for the cover photo and update icon */
                .profile-header-container {
                    position: relative;
                    max-width: 600px;
                    margin: 20px auto; /* Center the .profile-header-container */
                    height: 200px;
                    background-color: #8e09e7;
                    border-radius: 8px;
                    box-shadow: -2px -2px 6px rgba(142, 9, 231, 0.5);
                    display: flex;
                    align-items: flex-end;
                    overflow: hidden;
                }

                .cover-photo {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(142, 9, 231, 0.8);
                    background-size: cover;
                    background-position: center;
                    border-radius: 8px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: #fff;
                    font-size: 24px;
                    cursor: pointer;
                    transition: background-color 0.3s;
                }


                .update-cover-icon {
                    position: absolute;
                    bottom: 10px;
                    right: 10px;
                    color: #8fd93f;
                    font-size: 16px;
                    text-decoration: none;
                }

                .icon-container {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }

                /* Add new style for the .logo-container */
                .logo-container {
                    position: relative;
                }


            </style>

        </head>
    <body>
    <h2>Hello <span th:text="${user.firstname + ' ' + user.lastname}"></span></h2>
    <div class="profile-header-container">
        <!-- Cover Photo Container -->
        <div class="cover-photo" style="background-image: url('${user.coverPhoto}');">
            <a class="update-cover-icon" th:href="@{/profile/{id}/edit(id=${user.getId()})}">
                <i class="fas fa-camera"></i> Update Cover Photo
            </a>
        </div>

    <div class="icon-container">
        <button class="upload-icon" type="button">
            <i class="fas fa-camera"></i> Upload Image
        </button>
        <div class="logo-container">
            <img th:src="${user.image}" width="200" height="200" class="logo" alt="User Logo" />
    <form id="imageForm" method="post" action="/profile/upload">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" name="fileURL" id="fileURLInput"/>
    </form>
        </div>
    </div>
    </div>
    <div class="container">
        <h3>EDIT YOUR PROFILE</h3>
        <form id="edit-user-form" class="inline-form" th:action="@{/profile/{id}/edit(id=${user.getId()})}" th:method="post">
            <label for="name">name</label>
            <input id="name" name="name" type="text" th:value="${user.firstname + ' ' + user.lastname}" required />
            <br>
            <label for="email">Email</label>
            <input id="email" name="email" type="email" th:value="${user.email}" required />
            <br>
            <label for="about_me">About Me</label>
            <textarea id="about_me" name="about_me" rows="4">${user.about}</textarea>
            <br>
<!--            <label for="work">Work</label>-->
<!--            <input id="work" name="work" type="text" value="${user.work}" />-->
            <label for="work">Work</label>
            <select id="work-selection" name="work">
                <!-- Options for the "Work" field -->
                <option value="work.ask" th:selected="${user.work == 'work.ask'}">Ask me:</option>
                <option value="work.fact" th:selected="${user.work == 'work.fact'}">Fun fact:</option>
                <option value="work.help" th:selected="${user.work == 'work.help'}">I need help with:</option>
                <option value="work.learning" th:selected="${user.work == 'work.learning'}">I am currently earning:</option>
                <option value="working" th:selected="${user.work == 'working'}">I am working on:</option>
            </select>
            <input id="work" name="work" type="text" value="${user.work}" />
            <br>
            <label for="skills">Skills</label>
<!--            <select id="skill-selection" name="skills">-->
<!--                &lt;!&ndash; Options for the "Work" field &ndash;&gt;-->
<!--                <option value="language.Java" th:selected="${user.language == 'language.Java'}">Java</option>-->
<!--                <option value="language.C++" th:selected="${user.language == 'language.C++'}">C++</option>-->
<!--                <option value="language.Python" th:selected="${user.language == 'language.Python'}">Python</option>-->
<!--                <option value="language.HTML" th:selected="${user.language == 'languag.HTML'}">HTML</option>-->
<!--                <option value="language.CSS" th:selected="${user.language == 'language.CSS'}">CSS</option>-->
<!--                <option value="language.Javascript" th:selected="${user.language == 'skills.Javascript'}">Javascript</option>-->
<!--            </select>-->
            <input id="skills" name="skills" type="text" value="${user.language}" />
            <br>
            <label for="social_linked_in">Social Media (LinkedIn)</label>
            <input id="social_linked_in" name="social_linked_in" type="url" value="${user.socialLinkedIn}" />
            <br>
            <label for="social_git">Social Media (Git)</label>
            <input id="social_git" name="social_git" type="url" value="${user.socialGit}" />
            <br>
            <label for="social_face_book">Social Media (Facebook)</label>
            <input id="social_face_book" name="social_face_book" type="url" value="${user.socialFacebook}" />
            <br>
            <label for="projects">Projects</label>
            <input id="projects" name="projects" type="text" value="${user.projects}" />
            <br>
            <div class="button-group">
                <button type="submit" id="save-profile-btn">Save Profile</button>
                <br>
            </div>
            </form>
                <!-- Delete Task Form -->
                <form id="delete-user-form" class="inline-form" th:action="@{/profile/{id}/delete(id=${user.getId()})}" th:method="post">
                    <button id="delete-btn" class="orange-button">Delete Profile</button>
                </form>

    </div>

<!--<script>-->
<!--    $(document).ready(function() {-->
<!--    $('#delete-btn').on('click', function(event) {-->
<!--    event.preventDefault();-->

<!--    if (confirm('Are you sure you want to delete your profile?')) {-->
<!--    $('#delete-user-form').submit();-->
<!--    }-->
<!--    });-->
<!--    });-->
<!--</script>-->

        <script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
        <script>
            const button = document.querySelector('.upload-icon');
            const image = document.querySelector('.logo');

            button.addEventListener('click', () => {
                const apiKey = 'APaRx6LcnR9W7kXg7lQw2z';
                const client = filestack.init(apiKey);
                const options = {
                    onUploadDone: (uploadResponse) => {
                        console.log('onUploadDone', uploadResponse);
                        const fileURL = uploadResponse.filesUploaded[0].url;
                        image.setAttribute('src', fileURL);

                        // Submit the fileURL to the server via the form
                        const fileURLInput = document.querySelector('#fileURLInput');
                        fileURLInput.value = fileURL;
                        document.getElementById('imageForm').submit();
                    }
                };
                client.picker(options).open();
            });



        </script>
    </body>
    </html>

