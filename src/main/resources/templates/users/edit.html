<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/edit.css">
    <head th:include="partials/header :: head">


    </head>
<body>
<div th:include="partials/navbar :: navbar"></div>

<h2>Hello <span th:text="${user.firstname + ' ' + user.lastname}"></span></h2>
<div class="profile-header-container">
    <!-- Cover Photo Container -->
    <div class="cover-photo" style="background-image: url('${user.coverPhoto}');">
        <a class="update-cover-icon" th:href="@{/profile/{id}/edit(id=${user.getId()})}">
            <i class="fas fa-camera"></i> Update Cover Photo
        </a>
    </div>

    <div class="icon-container">
        <button class="upload-icon" type="button">
            <i class="fas fa-camera"></i> Upload Image
        </button>
        <div class="logo-container">
            <img th:src="${user.image}" width="200" height="200" class="logo" alt="User Logo"/>
            <form id="imageForm" method="post" action="/profile/upload">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="fileURL" id="fileURLInput"/>
            </form>
        </div>
    </div>
</div>
<div class="container">
    <h3>EDIT YOUR PROFILE</h3>
    <form id="edit-user-form" class="inline-form" th:action="@{/profile/{id}/edit(id=${user.getId()})}"
          th:method="post">
        <label for="name">Name:</label>
        <input id="name" name="name" type="text" th:value="${user.firstname + ' ' + user.lastname}" required/>
        <br>
        <label for="email">Email:</label>
        <input id="email" name="email" type="email" th:value="${user.email}" required/>
        <br>
        <label for="about_me">About Me:</label>
        <textarea id="about_me" name="about_me" rows="4">${portfolio.about}</textarea>
        <br>
        <label>Work:</label>
        <br>
        <!-- Input fields for each work value -->
        <label for="work-ask">Ask Me:</label>
        <input id="work-ask" name="work" type="text" value="${user.work == 'work.ask' ? 'Ask me:' : ''}"/>

        <label for="work-fact">Fun Fact:</label>
        <input id="work-fact" name="work" type="text" value="${user.work == 'work.fact' ? 'Fun fact:' : ''}"/>

        <label for="work-help">I need help with...</label>
        <input id="work-help" name="work" type="text" value="${user.work == 'work.help' ? 'I need help with:' : ''}"/>

        <label for="work-learning">I am currently learning...</label>
        <input id="work-learning" name="work" type="text"
               value="${user.work == 'work.learning' ? 'I am currently earning:' : ''}"/>

        <label for="working">I am working on...</label>
        <input id="working" name="work" type="text" value="${user.work == 'working' ? 'I am working on:' : ''}"/>
        <!-- Separate input field for the "Work" value -->
       <br>

        <!-- Skills section using CSS classes -->
        <label for="skills-custom">Skills:</label>
        <br>

        <!-- Skills section using custom checkboxes and icons -->
        <div class="skills-container">
            <div class="skill-item">
                <input id="skill-java" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Java' ? 'checked' : ''} />
                <label for="skill-java"><span class="skill-icon"><i class="fab fa-java"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-cpp" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.C++' ? 'checked' : ''} />
                <label for="skill-cpp"><span class="skill-icon"><i class="fab fa-cuttlefish"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-python" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Python' ? 'checked' : ''} />
                <label for="skill-python"><span class="skill-icon"><i class="fab fa-python"></i></span></label>
            </div>

            <!-- Add other skills with checkboxes and icons here -->
            <div class="skill-item">
                <input id="skill-js" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Javascript' ? 'checked' : ''} />
                <label for="skill-js"><span class="skill-icon"><i class="fab fa-js"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-react" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.React' ? 'checked' : ''} />
                <label for="skill-react"><span class="skill-icon"><i class="fab fa-react"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-ruby" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Ruby' ? 'checked' : ''} />
                <label for="skill-ruby"><span class="skill-icon"><i class="fas fa-gem"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-csharp" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.C#' ? 'checked' : ''} />
                <label for="skill-csharp"><span class="skill-icon"><i class="fab fa-microsoft"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-html" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.HTML' ? 'checked' : ''} />
                <label for="skill-html"><span class="skill-icon"><i class="fab fa-html5"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-css" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.CSS' ? 'checked' : ''} />
                <label for="skill-css"><span class="skill-icon"><i class="fab fa-css3-alt"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-mysql" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.MySQL' ? 'checked' : ''} />
                <label for="skill-mysql"><span class="skill-icon"><i class="fas fa-database"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-nodejs" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Node.js' ? 'checked' : ''} />
                <label for="skill-nodejs"><span class="skill-icon"><i class="fab fa-node-js"></i></span></label>
            </div>

            <div class="skill-item">
                <input id="skill-angular" name="skills" class="skills-checkbox" type="checkbox" ${user.language == 'language.Angular' ? 'checked' : ''} />
                <label for="skill-angular"><span class="skill-icon"><i class="fab fa-angular"></i></span></label>
            </div>
        </div>


        <br>
        <label for="social_linked_in">Social Media (LinkedIn):</label>
        <input id="social_linked_in" name="social_linked_in" type="url" value="${portfolio.LinkedIn}"/>
        <br>
        <label for="social_git">Social Media (Git):</label>
        <input id="social_git" name="social_git" type="url" value="${portfolio.github}"/>
        <br>
        <label for="social_face_book">Social Media (Facebook):</label>
        <input id="social_face_book" name="social_face_book" type="url" value="${portfolio.facebook}"/>
        <br>
        <label for="personal-web">Personal Website:</label>
        <input id="personal-web" name="personal-web" type="url" value="${portfolio.misclink}"/>
        <br>
        <label>Projects:</label>
        <br>
        <label for="projects.proj1">Project 1:</label>
        <input id="projects.proj1" name="proj1" type="url" value="${portfolio.proj1}"/>
        <label for="projects.proj2">Project 2:</label>
        <input id="projects.proj2" name="proj2" type="url" value="${portfolio.proj2}"/>
        <label for="projects.proj3">Project 3:</label>
        <input id="projects.proj3" name="proj3" type="url" value="${portfolio.proj3}"/>
        <br>

        <div class="button-group">
            <!-- Save Profile Button -->
            <button type="submit" id="save-profile-btn">Save Profile</button>

            <!-- Delete Profile Button -->
            <form id="delete-user-form" class="inline-form" th:action="@{/profile/{id}/delete(id=${user.getId()})}"
                  th:method="post">
                <button id="delete-btn" class="orange-button">Delete Profile</button>
            </form>
        </div>


        <!--<script>-->
        <!--    $(document).ready(function() {-->
        <!--    $('#delete-btn').on('click', function(event) {-->
        <!--    event.preventDefault();-->

        <!--    if (confirm('Are you sure you want to delete your profile?')) {-->
        <!--    $('#delete-user-form').submit();-->
        <!--    }-->
        <!--    });-->
        <!--    });-->
        <!--</script>-->

        <script src="//static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
        <script>
            const button = document.querySelector('.upload-icon');
            const image = document.querySelector('.logo');

            button.addEventListener('click', () => {
                const apiKey = 'APaRx6LcnR9W7kXg7lQw2z';
                const client = filestack.init(apiKey);
                const options = {
                    onUploadDone: (uploadResponse) => {
                        console.log('onUploadDone', uploadResponse);
                        const fileURL = uploadResponse.filesUploaded[0].url;
                        image.setAttribute('src', fileURL);

                        // Submit the fileURL to the server via the form
                        const fileURLInput = document.querySelector('#fileURLInput');
                        fileURLInput.value = fileURL;
                        document.getElementById('imageForm').submit();
                    }
                };
                client.picker(options).open();
            });


        </script>
        <footer th:replace="partials/footer :: footer"></footer>

</body>
</html>

