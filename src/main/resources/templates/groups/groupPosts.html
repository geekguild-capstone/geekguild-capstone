<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Post</title>-->
<!--    &lt;!&ndash;BOOTSTRAP CSS&ndash;&gt;-->
<!--    <link th:include="partials/header">-->
<!--    &lt;!&ndash;CUSTOM CSS &ndash;&gt;-->
<!--    <link rel="stylesheet" href="/css/postCard.css">-->

<!--</head>-->


<!--<body>-->
<!--<div th:each="groupPost, postIndex : ${groupPosts}">-->

<!--    <div class="post-card">-->
<!--        <div class="user-profile">-->
<!--            <img th:src="${groupPost.user.image}"-->
<!--                 alt="User Profile Image">-->
<!--            <div th:text="${groupPost.user.firstname + ' ' + groupPost.user.lastname}" class="username"></div>-->
<!--        </div>-->
<!--        <div class="post-content">-->
<!--            <p th:text="${groupPost.body}"></p>-->
<!--        </div>-->

<!--        <div id="post_image" class="post-image">-->
<!--            <img width="200px" th:src="${groupPost.image}">-->
<!--        </div>-->


<!--        <div class="interactions">-->
<!--            <button>-->
<!--                <div class="like-container">-->
<!--                    <i class="far fa-thumbs-up like-icon">Like</i>-->
<!--                    <div class="like-emojis">-->
<!--                        <span class="like-emoji" onclick="likeAction('üëç')">üëç Like</span>-->
<!--                        <span class="like-emoji" onclick="likeAction('‚ù§Ô∏è')">‚ù§Ô∏è Love</span>-->
<!--                        <span class="like-emoji" onclick="likeAction('üòÇ')">üòÇ Laugh</span>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </button>-->
<!--            <button class="comment-button" onclick="toggleCommentBox(this)"><i class="fas fa-comment">Comment</i>-->
<!--            </button>-->
<!--            <button class="share-button"><i class="fas fa-envelope ">Message</i>-->
<!--            </button>-->
<!--        </div>-->
<!--        &lt;!&ndash; Comment Dropdown Box &ndash;&gt;-->
<!--        <div class="comment-box" style="display: none;">-->
<!--            <input type="text" id="comment-input" placeholder="Add a comment...">-->
<!--            <button class="submit-comment-btn" onclick="submitComment(event)">Submit</button>-->
<!--        </div>-->
<!--        &lt;!&ndash; Comments Section &ndash;&gt;-->
<!--        <div class="comments-section" id="comments-section">-->
<!--            <div class="view-comments">-->
<!--                <h3>Comments:</h3>-->
<!--                <ul>-->
<!--                    <li th:each="comment : ${groupPostComments[postIndex.index]}">-->
<!--                        <p th:text="${comment.text}"></p>-->
<!--                        <p th:text="${comment.user.firstname + ' ' + comment.user.lastname}"></p>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<!--<script>-->
<!--    function toggleCommentBox(button) {-->
<!--        const postCard = button.closest('.post-card');-->
<!--        const commentBox = postCard.querySelector('.comment-box');-->

<!--        // Toggle the visibility of the comment box-->
<!--        if (commentBox.style.display === 'none') {-->
<!--            commentBox.style.display = 'block';-->
<!--        } else {-->
<!--            commentBox.style.display = 'none';-->
<!--        }-->
<!--    }-->

<!--    // Function to handle comment submission-->
<!--    function submitComment(event) {-->
<!--        const button = event.target;-->
<!--        const postCard = button.closest('.post-card');-->
<!--        const commentInput = postCard.querySelector('#comment-input');-->
<!--        console.log(commentInput)-->
<!--        const commentsSection = postCard.querySelector('.comments-section');-->

<!--        const commentText = commentInput.value.trim();-->
<!--        if (commentText !== '') {-->
<!--            // Create a new comment element and append it to the comments section-->
<!--            const newComment = document.createElement('div');-->
<!--            newComment.classList.add('comment');-->
<!--            newComment.textContent = commentText;-->
<!--            commentsSection.appendChild(newComment);-->

<!--            // Clear the comment input field-->
<!--            commentInput.value = '';-->
<!--        }-->
<!--    }-->

<!--    // Function for the like action, if needed-->
<!--    function likeAction(emoji) {-->
<!--        // Code for handling like action goes here-->
<!--    }-->
<!--</script>-->
<!--&lt;!&ndash;<div th:each="groupPost, postIndex : ${groupPosts}">&ndash;&gt;-->
<!--&lt;!&ndash;  &lt;!&ndash; Display post content here &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <p th:text="${groupPost.body}"></p>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Display post image if available &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <img th:src="${groupPost.image}" width="200" height="200" class="post-image" />&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Display comments for the current post &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <div class="view-comments">&ndash;&gt;-->
<!--&lt;!&ndash;    <h3>Comments:</h3>&ndash;&gt;-->
<!--    <ul>-->
<!--      <li th:each="comment : ${groupPostComments[postIndex.index]}">-->
<!--        <p th:text="${comment.text}"></p>-->
<!--        <p th:text="${comment.user.firstname + ' ' + comment.user.lastname}"></p>-->
<!--      </li>-->
<!--    </ul>-->
<!--&lt;!&ndash;  </div>&ndash;&gt;-->

<!--&lt;!&ndash;  &lt;!&ndash; Add a form to submit new comments for the current post &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;  <form th:action="@{/comment}" method="post">&ndash;&gt;-->
<!--&lt;!&ndash;    <input type="hidden" name="postId" th:value="${groupPost.id}" />&ndash;&gt;-->
<!--&lt;!&ndash;    <textarea name="content"></textarea>&ndash;&gt;-->
<!--&lt;!&ndash;    <button type="submit">Add Comment</button>&ndash;&gt;-->
<!--&lt;!&ndash;  </form>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->


<!--<script th:include="partials/footer"></script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post</title>
    <!-- Add the necessary CSS libraries (e.g., Font Awesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!--CUSTOM CSS -->
    <link rel="stylesheet" href="/css/postCard.css">
</head>

<body>
<div th:each="post, postIndex : ${groupPosts}">
    <div class="post-card">

        <div class="edit-icons">
            <i class="far fa-edit edit-icon" onclick="editPost(event)"></i>
            <i class="far fa-times-circle delete-icon" onclick="deletePost(event)"></i>
        </div>


        <div class="user-profile">
            <img th:src="${post.user.image}" alt="User Profile Image">
            <div th:text="${post.user.firstname + ' ' + post.user.lastname}" class="username"></div>
        </div>
        <div class="post-content-container">
            <div class="post-content">
                <p th:text="${post.body}"></p>

                <!-- Move the .post-image div here, within .post-content -->
                <div class="post-image">
                    <img width="100%" th:src="${post.image}">
                </div>
            </div>

            <div class="interactions">
                <button onmouseover="showLikeEmojis(this)" onmouseout="hideLikeEmojis(this)">
                    <i class="far fa-thumbs-up"></i>Like
                </button>
                <div class="like-emojis" style="display: none;">
                    <span class="like-emoji" onclick="likeAction('üëç')">üëç</span>
                    <span class="like-emoji" onclick="likeAction('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                    <span class="like-emoji" onclick="likeAction('üòÇ')">üòÇ</span>
                </div>

                <button class="comment-button" onclick="toggleCommentBox(this)">
                    <i class="far fa-comment-dots"></i>Comment
                </button>
                <button class="share-button">
                    <i class="fas fa-envelope"></i>Message <!-- Updated text and icon -->
                </button>
            </div>
        </div>

        <div class="comment-box">
            <input type="text" id="comment-input" placeholder="Add a comment...">
            <button class="submit-comment-btn" onclick="submitComment(event)">Submit</button>
        </div>

        <div class="comments-section" id="comments-section">
            <!-- Display comments here (if available) -->
            <ul>
                <li th:each="comment : ${groupPostComments[postIndex.index]}">
                    <p th:text="${comment.text}"></p>
                    <p th:text="${comment.user.firstname + ' ' + comment.user.lastname}"></p>
                </li>
            </ul>
        </div>
    </div>
</div>


<script>
    function toggleCommentBox(button) {
        const postCard = button.closest('.post-card');
        const commentBox = postCard.querySelector('.comment-box');

        // Toggle the visibility of the comment box
        if (commentBox.style.display === 'none') {
            commentBox.style.display = 'block';
        } else {
            commentBox.style.display = 'none';
        }
    }

    function submitComment(event) {
        const button = event.target;
        const postCard = button.closest('.post-card');
        const commentInput = postCard.querySelector('#comment-input');
        const commentsSection = postCard.querySelector('.comments-section');

        const commentText = commentInput.value.trim();
        if (commentText !== '') {
            // Create a new comment element and append it to the comments section
            const newComment = document.createElement('div');
            newComment.classList.add('comment');

            // User profile image (replace with actual image source)
            const userProfileImg = document.createElement('img');
            userProfileImg.src = 'https://via.placeholder.com/24';
            userProfileImg.alt = 'User Profile Image';

            // User profile username (replace with actual username)
            const userProfileUsername = document.createElement('div');
            userProfileUsername.classList.add('username');
            userProfileUsername.textContent = 'John Doe';

            // Comment content
            const commentContent = document.createElement('p');
            commentContent.textContent = commentText;

            // Horizontal line to separate comments
            const hr = document.createElement('hr');

            // Append the elements to the comment container
            newComment.appendChild(userProfileImg);
            newComment.appendChild(userProfileUsername);
            newComment.appendChild(commentContent);
            newComment.appendChild(hr);

            commentsSection.appendChild(newComment);

            // Clear the comment input field
            commentInput.value = '';

            // Auto-close the comment box after submission
            const commentBox = postCard.querySelector('.comment-box');
            commentBox.style.display = 'none';
        }

    }

    function showLikeEmojis(button) {
        const postCard = button.closest('.post-card');
        const likeEmojis = postCard.querySelector('.like-emojis');
        likeEmojis.style.display = 'block';
    }

    function hideLikeEmojis(button) {
        const postCard = button.closest('.post-card');
        const likeEmojis = postCard.querySelector('.like-emojis');
        likeEmojis.style.display = 'none';
    }
</script>
</body>
</html>

